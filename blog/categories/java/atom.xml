<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: java | mike、mikeなるままに…]]></title>
  <link href="http://mike-neck.github.io/blog/categories/java/atom.xml" rel="self"/>
  <link href="http://mike-neck.github.io/"/>
  <updated>2013-06-13T23:17:25+09:00</updated>
  <id>http://mike-neck.github.io/</id>
  <author>
    <name><![CDATA[mike-neck]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[gradleのjavadocタスクでjavadocを英語で出力する方法]]></title>
    <link href="http://mike-neck.github.io/blog/2013/06/13/how-to-generate-javadoc-in-english-on-japanese-environment/"/>
    <updated>2013-06-13T22:39:00+09:00</updated>
    <id>http://mike-neck.github.io/blog/2013/06/13/how-to-generate-javadoc-in-english-on-japanese-environment</id>
    <content type="html"><![CDATA[<p>こんにちわ、みけです。</p>

<p>表題の件はこの記事の前半部分に書いています。</p>

<p>なので、必要な人は前半部分だけ読んで下さい。</p>

<hr />

<p>大した話ではありませんが、</p>

<h1>gradleのjavadocタスクで出力されるjavadocが日本語で出力される</h1>

<p>のがちょっと残念な時があります。</p>

<p><code>java</code>プラグインを入れていれば、<code>javadoc</code>タスクが自動で追加されます。</p>

<p>僕のような日本語環境でやっている人だと、</p>

<p>頑張ってjavadocを英語で書いても、</p>

<p>テンプレートが日本語で出力されてしまいます。</p>

<p>会社で日本語を使っていて、</p>

<p>javadocが日本語でないと困る場合は、</p>

<p>全然問題ないとおもいますが…</p>

<p>オープンソースなソフトウェアを開発している場合、</p>

<p>javadocが日本語だとなんか若干困ります。</p>

<p>(まあ、だいたいjavadocのテンプレートなんで、何が出力されているかなんてわかりますけどね…)</p>

<h1><code>javadoc</code>タスクの設定で<code>options.locale</code>に<code>en_US</code>を指定すればいいです</h1>

<p>つまり、以下のとおりになります。</p>

<p>```groovy build.gradle
apply plugin : &lsquo;java&rsquo;</p>

<p>javadoc {</p>

<pre><code>options.locale = 'en_US'
</code></pre>

<p>}
```</p>

<p><strong>本題、終わり</strong></p>

<hr />

<p>ちなみに、僕の得意技はtypoなので、間違えてこんなビルドスクリプト書いてました。</p>

<p><strong>(誤)</strong></p>

<p>```groovy build.gradle
apply plugin : &lsquo;java&rsquo;</p>

<p>javadoc {</p>

<pre><code>options.local = 'en_US'
</code></pre>

<p>}
```</p>

<p>これを実行したら、こんなエラーが出力されました。</p>

<p>```
$ gradle javadoc
Picked up _JAVA_OPTIONS: -Dfile.encoding=UTF-8</p>

<p>FAILURE: Build failed with an exception.</p>

<ul>
<li><p>Where:
Script &lsquo;/Users/mike/myprojects/sample/build.gradle&rsquo; line: 4</p></li>
<li><p>What went wrong:
A problem occurred evaluating script.</p>

<blockquote><p>No such property: local for class: org.gradle.external.javadoc.StandardJavadocDocletOptions
Possible solutions: locale</p></blockquote></li>
<li><p>Try:
Run with &mdash;stacktrace option to get the stack trace. Run with &mdash;info or &mdash;debug option to get more log output.</p></li>
</ul>


<p>BUILD FAILED</p>

<p>Total time: 8.941 secs
```</p>

<p>gradle曰く</p>

<blockquote><p><code>local</code>なんてオプションないよ、<code>locale</code>じゃない？</p></blockquote>

<p>というわけで、</p>

<h1>gradleさん正しい答えを教えてくれたりと、親切ですね。</h1>

<p>本当に親切なツールです。</p>

<p>しかし、</p>

<h1>本当に親切なのはgroovyの思想</h1>

<p>です。</p>

<p>例えば次のようなgroovyのスクリプトがあるとします。</p>

<p>```groovy error.groovy
def range = 1..10
range.colect {</p>

<pre><code>println (it * it)
</code></pre>

<p>}
```</p>

<p>これを実行するとこういうエラーが出力されます。</p>

<p>```
$ groovy error.groovy
Caught: groovy.lang.MissingMethodException: No signature of method: groovy.lang.IntRange.colect() is applicable for argument types: (error$<em>run_closure1) values: [error$</em>run_closure1@639d564]
Possible solutions: collect(), collect(), collect(groovy.lang.Closure), collect(groovy.lang.Closure), collect(java.util.Collection, groovy.lang.Closure), collect(java.util.Collection, groovy.lang.Closure)
groovy.lang.MissingMethodException: No signature of method: groovy.lang.IntRange.colect() is applicable for argument types: (error$<em>run_closure1) values: [error$</em>run_closure1@639d564]
Possible solutions: collect(), collect(), collect(groovy.lang.Closure), collect(groovy.lang.Closure), collect(java.util.Collection, groovy.lang.Closure), collect(java.util.Collection, groovy.lang.Closure)</p>

<pre><code>at error.run(error.groovy:2)
</code></pre>

<p>```</p>

<p>存在しないメソッドを呼び出した時に、</p>

<p><strong>Possible solutions</strong>ということで、</p>

<p>サジェストしてくれます。</p>

<p>また、有名な例ですが、Power Assertもあります。</p>

<p><code>groovy error.groovy
def list = [1,1,2,3,4,5]
assert list - [1,3,6] == [1,2,4,5]
</code></p>

<p>これを実行すると、このように表示されます。</p>

<p>```
$ groovy error.groovy
Caught: Assertion failed:</p>

<p>assert list &ndash; [1,3,6] == [1,2,4,5]</p>

<pre><code>   |    |         |
   |    [2, 4, 5] false
   [1, 1, 2, 3, 4, 5]
</code></pre>

<p>Assertion failed:</p>

<p>assert list &ndash; [1,3,6] == [1,2,4,5]</p>

<pre><code>   |    |         |
   |    [2, 4, 5] false
   [1, 1, 2, 3, 4, 5]

at error.run(error.groovy:2)
</code></pre>

<p>```</p>

<p>ただ、求めている結果と実際の結果が<strong>違う</strong>という表示だけでなく、</p>

<p>実際の値を示してくれます。</p>

<p>つまり一言で言えば、</p>

<h1>groovyの半分は優しさでできています</h1>

<p>なお、この機能はもともとからgroovyにあったわけではなく、</p>

<p>Spockというテスティングフレームワークから採用された機能です。</p>

<p>groovyの思想では、こういった、(・∀・)ｲｲﾈ!!な機能を</p>

<p>どんどん取り込んでいくというのがあると思っています。</p>

<p>まあ、元々、javaを良い感じで書きたいといった思想から生まれている言語ですし、</p>

<p>実際に、rubyなど他の言語のいいところを借りたりしているので、</p>

<p>後発の優位性を遺憾なく発揮しているわけですが…</p>

<p><!-- admax -->
<script type="text/javascript" src="http://adm.shinobi.jp/s/d0f95faac716337846b3bcf82925c26e"></script>
<!-- admax -->


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-40855644-1', 'github.io');
  ga('send', 'pageview');

</script>
</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[rubyのmixinの話を読んでいたら、何故かjavaを書いていた]]></title>
    <link href="http://mike-neck.github.io/blog/2013/06/08/rubyfalsemixinfalsehua-wodu-ndeitara%2C-he-gu-kajavawoshu-iteita/"/>
    <updated>2013-06-08T21:22:00+09:00</updated>
    <id>http://mike-neck.github.io/blog/2013/06/08/rubyfalsemixinfalsehua-wodu-ndeitara,-he-gu-kajavawoshu-iteita</id>
    <content type="html"><![CDATA[<p>こんにちわ、みけです。</p>

<p><a href="https://twitter.com/suginoy">@suginoy</a>さんに</p>

<p><a href="http://www.amazon.co.jp/gp/product/4774151661/ref=as_li_ss_tl?ie=UTF8&amp;camp=247&amp;creative=7399&amp;creativeASIN=4774151661&amp;linkCode=as2&amp;tag=kkkjkrt-22">『楽しい開発スタートアップRuby』</a>を買っていただいたので、</p>

<p>今日はそれを某社オフィスで読んでいました。</p>

<h1>Rubyのmix-inについての読んだ後の会話</h1>

<ul>
<li>僕「mix-inよくわからん」</li>
<li>イケメン「多重継承できるやつでしょう」</li>
<li>僕「mix-inってインスタンス変数とかにアクセスできるのかな？」</li>
<li>イケメン「できそうじゃね」</li>
<li>僕「あ〜、Java8のdefault実装でもmix-inと同じ事できそうじゃね」</li>
<li>イケメン「いや、できないでしょう。default実装といっても、interfaceにフィールドを持つことができないわけだから」</li>
<li>僕「え、できないのか、あー、そうかできないな。えっ、じゃあ、あれ、誰得なの？」</li>
</ul>


<p>(多少脚色有り、あと会話内容忘れたので、結構適当)</p>

<p>で、</p>

<h1>書いていたのがJava8のコードでした</h1>

<p>```java Score.java
package org.mikeneck.jdk8;</p>

<p>/<em>*
 * @author mike
 </em>/
public class Score {</p>

<pre><code>final private String title;

final private int value;

public Score(String title, int value) {
    this.title = title;
    this.value = value;
}

public String getTitle() {
    return title;
}

public int getValue() {
    return value;
}
</code></pre>

<p>}
```</p>

<p>```java Grade.java
package org.mikeneck.jdk8;</p>

<p>import java.util.List;</p>

<p>/<em>*
 * @author mike
 </em>/
public interface Grade {</p>

<pre><code>public List&lt;Score&gt; scores();

default long getTotalScore () {
    return scores()
            .stream()
            .mapToLong(Score::getValue)
            .reduce(0l, Long::sum);
}
</code></pre>

<p>}
```</p>

<p>ところで、このdefaultメソッド、</p>

<p>書いている途中はこんな感じでした。</p>

<p><img src="https://googledrive.com/host/0B4hhdHWLP7RRYk5mVkd1RFFQYmc" style="width : 501px;" /></p>

<p>IntelliJ IDEAではシンタックスをもっとよくできる場合は、</p>

<p>こういう形で通知してくれます。</p>

<p>紫の部分にカーソルをあてて、</p>

<p>Alt + Enter (mac の場合は option + enter)をすると、</p>

<p>操作の候補が表示されます。</p>

<p><img src="https://googledrive.com/host/0B4hhdHWLP7RRQzhXZnc0Z2lVc0k" style="width : 501px;"/></p>

<p>ここでは<strong>Replace lambda with method reference</strong>を選択します。</p>

<p><img src="https://googledrive.com/host/0B4hhdHWLP7RRbnFGWmE1czJrRk0" style="width : 501px;"/></p>

<p>すごいシンプルなコードになりました。</p>

<p>続いて、mapした結果をreduceしていきます。</p>

<p><img src="https://googledrive.com/host/0B4hhdHWLP7RRa0s1ZldObzA0VzA" style="width : 501px;"/></p>

<p>初期値<code>0l</code>で、結果を合計したいので、次のような演算を書きます。</p>

<p><img src="https://googledrive.com/host/0B4hhdHWLP7RRTVAxQUE0d0tQMU0" style="width : 501px;"/></p>

<p>これはこれでまちがいでありません。</p>

<p>ところで、<code>java.util.stream.Stream#mapToLong</code>の戻り値である、</p>

<p><code>java.util.stream.LongStream</code>のjavadocを読むとこのように記述されています。</p>

<blockquote><p>Api note : Sum, min, max, and average are all special cases of reduction.
Summing a stream of numbers can be expressed as:</p>

<p><code>
long sum = integers.reduce(0, (a, b) -&gt; a+b);
</code></p>

<p>or more compactly:</p>

<p><code>
long sum = integers.reduce(0, Long::sum);
</code></p>

<p><em>引用元 : javadoc (build-89)</em></p></blockquote>

<p>つまり、<code>java.util.function.LongBinaryOperator</code>の記述</p>

<p><code>java
(sum, item) -&gt; sum + item
</code></p>

<p>は、<code>java.lang.Long</code>の<code>static</code>なメソッド<code>sum(long, long)</code>に</p>

<p>置き換えることができるということです。</p>

<p>その結果、先のコードは次のようになりました(既出)。</p>

<p><img src="https://googledrive.com/host/0B4hhdHWLP7RRS25qWnVZX2dHdW8" style="width : 501px;"/></p>

<p>さて、ここらへんの<code>Stream</code>系の操作がエンタープライズな現場で使われるかどうかは</p>

<p>微妙ですが…(というのも、値の集計をするというのであれば、DBにさせたほうが早いので)</p>

<p>実際に現場で使うとなると、</p>

<p>高機能なIDE(<code>Long::sum</code>の部分はIntelliJでも簡略化できなかった)と</p>

<p><code>Stream</code>系のApiの書き方を覚えておかないと、</p>

<p>相当効率悪くなるとおもいます。</p>

<p>というわけで、Java8の勉強をしたい方は是非</p>

<p>6月26日(水)の『Java8初心者勉強会』にご参加下さい。</p>

<p>Java8初心者勉強会 &ndash; <a href="http://atnd.org/event/java8beginner20130626tokyo">http://atnd.org/event/java8beginner20130626tokyo</a></p>

<p>結論</p>

<h1>あれ、rubyのmix-inについての話はどこ行った…</h1>

<p>vimでrubyのコード書くの辛いです…</p>

<p><!-- admax -->
<script type="text/javascript" src="http://adm.shinobi.jp/s/d0f95faac716337846b3bcf82925c26e"></script>
<!-- admax -->


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-40855644-1', 'github.io');
  ga('send', 'pageview');

</script>
</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Groovyでpegdownをさわってみる]]></title>
    <link href="http://mike-neck.github.io/blog/2013/06/08/groovydepegdownwosawatutemiru/"/>
    <updated>2013-06-08T05:25:00+09:00</updated>
    <id>http://mike-neck.github.io/blog/2013/06/08/groovydepegdownwosawatutemiru</id>
    <content type="html"><![CDATA[<p>みけです。</p>

<p><img src="http://mike-neck.github.io//groovy.codehaus.org/images/groovy-logo-medium.png" style="width : 450px;"/></p>

<p>前回に引き続き、Javaのmarkdownパーサーを試してみます。</p>

<p>で、今回は</p>

<h1><a href="https://github.com/sirthias/pegdown">pegdown</a></h1>

<p>を試してみました。</p>

<p>サンプルコードは前回とほとんど変わりません。</p>

<p>```groovy pegdown-sample.groovy
@Grab(&lsquo;org.pegdown:pegdown:1.2.1&rsquo;)</p>

<p>def processor = new org.pegdown.PegDownProcessor()</p>

<p>def original = $/</p>

<h2>This is Top Header</h2>

<h1>This is second Header</h1>

<h3>This is topic</h3>

<h4>Lists Item</h4>

<p>${(1..3).collect {&ldquo;+ item${it}&rdquo;}.join(&lsquo;\n&rsquo;)}</p>

<p>and</p>

<p>${(1..3).collect {&ldquo;1. item${it}&rdquo;}.join(&lsquo;\n&rsquo;)}</p>

<h4>Links</h4>

<ul>
<li><a href="http://mike-neck.github.io/">mike-neck&rsquo;s site</a></li>
<li><a href="http://mikeneckdq.blog.fc2.com/">mike-neck&rsquo;s dq site</a></li>
<li><img src="http://groovy.codehaus.org/images/groovy-logo-medium.png" alt="groovy image" /></li>
</ul>


<h4>Html Tags</h4>

<p><img src='http://mike-neck.github.io//googledrive.com/host/0B4hhdHWLP7RRdHRGZ3ZrZU90Q00' style='width : 400px;'></p>

<h4>Codes</h4>

<p>function <code>lists:reverse/1</code> returns a List.</p>

<p>tag <code>&lt;em&gt;</code> means emphasis</p>

<p><code>groovy
def string = 'This is groovy code.'
</code></p>

<h4>emphasis</h4>

<p><em>em?</em></p>

<p><strong>bold?</strong></p>

<h4>Blockquotes</h4>

<blockquote><p>This is a blockquotes
from here.</p></blockquote>

<p>/$</p>

<p>processor.markdownToHtml(original)
```</p>

<p>実行結果はこんな感じ。</p>

<p>```html</p>

<h2>This is Top Header</h2>


<h1>This is second Header</h1>


<h3>This is topic</h3>


<h4>Lists Item</h4>


<ul>
  <li>item1</li>
  <li>item2</li>
  <li>item3</li>
</ul>


<p>and</p>


<ol>
  <li>item1</li>
  <li>item2</li>
  <li>item3</li>
</ol>


<h4>Links</h4>


<ul>
  <li><a href="http://mike-neck.github.io/">mike-neck's site</a></li>
  <li><a href="http://mikeneckdq.blog.fc2.com/">mike-neck's dq site</a></li>
  <li><img src="http://groovy.codehaus.org/images/groovy-logo-medium.png"  alt="groovy image"/></li>
</ul>


<h4>Html Tags</h4>


<p><img src='http://mike-neck.github.io//googledrive.com/host/0B4hhdHWLP7RRdHRGZ3ZrZU90Q00' style='width : 400px;'></p>


<h4>Codes</h4>


<p>function <code>lists:reverse/1</code> returns a List.</p>


<p>tag <code>&lt;em&gt;</code> means emphasis</p>


<p><code>groovy
def string = &#39;This is groovy code.&#39;
</code></p>


<h4>emphasis</h4>


<p><em>em?</em></p>


<p><strong>bold?</strong></p>


<h4>Blockquotes</h4>


<blockquote><p>This is a blockquotes from here.</p>
</blockquote>


<p>```</p>

<h2>markdownjとの比較</h2>

<p>markdownjではこんな不具合が有りました。</p>

<ul>
<li><code>===</code>がレンダーされない</li>
<li>上の行にテキストがある状態で'&mdash;&ndash;&lsquo;がタグ<code>&lt;tr/&gt;</code>にレンダーされる</li>
<li>当然ながら、GitHubっぽいコードスニペットはレンダーできない</li>
</ul>


<p>一方、これらのうち、</p>

<ul>
<li><code>===</code>がレンダーされない</li>
<li>上の行にテキストがある状態で'&mdash;&ndash;&lsquo;がタグ<code>&lt;tr/&gt;</code>にレンダーされる</li>
</ul>


<p>はgepdownでは解消されているようです。</p>

<p>残念ながら、</p>

<ul>
<li>当然ながら、GitHubっぽいコードスニペットはレンダーできない</li>
</ul>


<p>というのはあります。</p>

<p>というわけで、pegdownの方が、良さげな感じがします。</p>

<p><!-- admax -->
<script type="text/javascript" src="http://adm.shinobi.jp/s/d0f95faac716337846b3bcf82925c26e"></script>
<!-- admax -->


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-40855644-1', 'github.io');
  ga('send', 'pageview');

</script>
</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Groovyでmarkdownjをさわってみる]]></title>
    <link href="http://mike-neck.github.io/blog/2013/06/07/groovydemarkdownjwosawatutemiru/"/>
    <updated>2013-06-07T21:10:00+09:00</updated>
    <id>http://mike-neck.github.io/blog/2013/06/07/groovydemarkdownjwosawatutemiru</id>
    <content type="html"><![CDATA[<p><img src="http://mike-neck.github.io//googledrive.com/host/0B4hhdHWLP7RRcURrSlZiNXlNVVk" style="width : 450px;"/></p>

<p>こんにちわ、みけです。</p>

<p>このブログはOCTOPRESSで作っていますが、</p>

<p>どうしてもやりたい処理があったら、</p>

<p>rubyを勉強しないとアババな感じなので、</p>

<p>Javaでも同じようなものを作ってみたいと思っています。</p>

<h1>OCTOPRESSっぽいツールに必要そうな機能</h1>

<p>はこんな感じかなと思っています。</p>

<ul>
<li>タスクを指定して実行する</li>
<li>git連携</li>
<li>previewできる</li>
<li>マークダウンをHTMLに変換する</li>
</ul>


<p>これらのうち、最初のタスクを指定して実行するはGradleでやればよさそうです。</p>

<p>git連携はJGitを使えばできそうです。</p>

<p>previewはJettyだか、nettyだか、glassfishを使えばできそうです。</p>

<p>で、最後の</p>

<h1>JavaでマークダウンをHTMLに変換する</h1>

<p>はわからないので、</p>

<p>ちょっと試して見ることにしました。</p>

<p>まず、筆頭にくる <strong>markdownj</strong> を試してみることにしました</p>

<p>```groovy markdown-sample.groovy
@Grab(&lsquo;com.madgag:markdownj-core:0.4.1&rsquo;)</p>

<p>import com.petebevin.markdown.*</p>

<p>def proc = new MarkdownProcessor()</p>

<p>def original = $/</p>

<h2>This is Top Header</h2>

<h1>This is second Header</h1>

<h3>This is topic</h3>

<h4>Lists Item</h4>

<p>${(1..3).collect {&ldquo;+ item${it}&rdquo;}.join(&lsquo;\n&rsquo;)}</p>

<p>and</p>

<p>${(1..3).collect {&ldquo;1. item${it}&rdquo;}.join(&lsquo;\n&rsquo;)}</p>

<h4>Links</h4>

<ul>
<li><a href="http://mike-neck.github.io/">mike-neck&rsquo;s site</a></li>
<li><a href="http://mikeneckdq.blog.fc2.com/">mike-neck&rsquo;s dq site</a></li>
</ul>


<h4>Html Tags</h4>

<p><img src='http://mike-neck.github.io//googledrive.com/host/0B4hhdHWLP7RRdHRGZ3ZrZU90Q00' style='width : 400px;'></p>

<h4>Codes</h4>

<p>function <code>lists:reverse/1</code> returns a List.</p>

<p>tag <code>&lt;em&gt;</code> means emphasis</p>

<h4>emphasis</h4>

<p><em>em?</em></p>

<p><strong>bold?</strong></p>

<h4>Blockquotes</h4>

<blockquote><p>This is a blockquotes
from here.</p></blockquote>

<p>/$</p>

<p>proc.markdown(original)
```</p>

<p>これの結果は次のようになります。</p>

<p>```html</p>

<p>This is Top Header
<hr /></p>




<p>This is second Header
===</p>




<h3>This is topic</h3>




<h4>Lists Item</h4>




<ul>
<li>item1</li>
<li>item2</li>
<li>item3</li>
</ul>




<p>and</p>




<ol>
<li>item1</li>
<li>item2</li>
<li>item3</li>
</ol>




<h4>Links</h4>




<ul>
<li><a href="http://mike-neck.github.io/">mike-neck's site</a></li>
<li><a href="http://mikeneckdq.blog.fc2.com/">mike-neck's dq site</a></li>
</ul>




<h4>Html Tags</h4>




<p><img src='http://mike-neck.github.io//googledrive.com/host/0B4hhdHWLP7RRdHRGZ3ZrZU90Q00' style='width : 400px;'></p>




<h4>Codes</h4>




<p>function <code>lists:reverse/1</code> returns a List.</p>




<p>tag <code>&lt;em&gt;</code> means emphasis</p>




<h4>emphasis</h4>




<p><em>em?</em></p>




<p><strong>bold?</strong></p>




<h4>Blockquotes</h4>




<blockquote>
  <p>This is a blockquotes
  from here.</p>
</blockquote>


<p>```</p>

<p>今のところ、残念な点は</p>

<ul>
<li><code>===</code>がレンダーされない</li>
<li>上の行にテキストがある状態で'&mdash;&ndash;&lsquo;がタグ<code>&lt;tr/&gt;</code>にレンダーされる</li>
<li>当然ながら、GitHubっぽいコードスニペットはレンダーできない</li>
</ul>


<p>ちょっと残念なので、</p>

<p>他のマークダウンパーサーも試してみようと思います。</p>

<p><!-- admax -->
<script type="text/javascript" src="http://adm.shinobi.jp/s/d0f95faac716337846b3bcf82925c26e"></script>
<!-- admax -->


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-40855644-1', 'github.io');
  ga('send', 'pageview');

</script>
</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[AndroidがJavaでない理由 - 1]]></title>
    <link href="http://mike-neck.github.io/blog/2013/06/01/androidgajavadenaili-you-1/"/>
    <updated>2013-06-01T02:22:00+09:00</updated>
    <id>http://mike-neck.github.io/blog/2013/06/01/androidgajavadenaili-you-1</id>
    <content type="html"><![CDATA[<p>こんにちは。</p>

<p>みけです。</p>

<p>また仰々しいタイトルですみません。</p>

<h2>Androidのsdkが5月16日近辺にrevision22に更新されたようです</h2>

<p>リリースノートを一部抜粋、翻訳(意訳)するとこんな感じです。</p>

<ul>
<li>既存の<code>platfomr-tools</code>を元にSDKの構造を変更して、新しいビルドツール等を追加しました。この変更により、ビルドツールのバージョンとIDEのバージョンを切り離すことが可能になります。その結果、IDEの更新なしにツールの更新が可能になりました。</li>
</ul>


<p>さて、僕はAndroidに関しては情弱なので、この変更が意味するところをあまり気にせず、</p>

<p>本題である<strong>「JavaがAndroidでない理由」</strong>ことの実例コードを書こうとして</p>

<p>サンプルプロジェクトを作って、実行しようとした時にそれは起こりました。</p>

<h2>android-apt-compiler: Cannot run program &ldquo;/Users/name/Android/sdk/android-sdk-macosx/platform-tools/aapt&rdquo;: error=2, No such file or directory</h2>

<p><img src="https://pbs.twimg.com/media/BLlghpZCAAA8qOp.png:large" style="width : 504px;"/></p>

<p>うん？コンパイル用のツールが見つからない？</p>

<p>というわけで、件のディレクトリーに移動、ファイル探してみると…</p>

<p><code>
:~ mike$ cd ~/Android/sdk/android-sdk-macosx/platform-tools/
:platform-tools mike$ ll
total 3664
drwxr-xr-x   7 mike  staff   238B  5 31 19:05 .
drwxr-x---  14 mike  staff   476B  5 31 18:31 ..
-rw-r--r--   1 mike  staff   396K  5 31 18:30 NOTICE.txt
-rwxr-xr-x   1 mike  staff   1.2M  5 31 18:30 adb
drwxr-xr-x   3 mike  staff   102B  5 31 18:30 api
-rwxr-xr-x   1 mike  staff   185K  5 31 18:30 fastboot
-rw-r--r--   1 mike  staff    16K  5 31 18:30 source.properties
</code></p>

<p>うむ、確かにそんなものはない…</p>

<p>で、いろいろとディレクトリーを漁ってみると</p>

<p><code>
:~ mike$ cd ~/Android/sdk/android-sdk-macosx/build-tools/17.0.0/
:17.0.0 mike$ ll
total 61624
drwxr-xr-x  11 mike  staff   374B  5 31 18:30 .
drwxr-xr-x   3 mike  staff   102B  5 31 18:30 ..
-rw-r--r--   1 mike  staff    11K  5 31 18:30 NOTICE.txt
-rwxr-xr-x   1 mike  staff   1.2M  5 31 18:30 aapt
-rwxr-xr-x   1 mike  staff   273K  5 31 18:30 aidl
-rwxr-xr-x   1 mike  staff   141K  5 31 18:30 dexdump
-rwxr-xr-x   1 mike  staff   2.5K  5 31 18:30 dx
drwxr-xr-x   3 mike  staff   102B  5 31 18:30 lib
-rwxr-xr-x   1 mike  staff    28M  5 31 18:30 llvm-rs-cc
drwxr-xr-x   4 mike  staff   136B  5 31 18:30 renderscript
-rw-r--r--   1 mike  staff    16K  5 31 18:30 source.properties
</code></p>

<p>お、あった。</p>

<p>…あったはいいよ。</p>

<p>でも、このディレクトリーは何？</p>

<p><strong><code>17.0.0</code></strong></p>

<p>何、このディレクトリー。</p>

<p>数字ディレクトリー。</p>

<p><strong>どこのSIerの作業ですか？</strong></p>

<p>え、じゃあ、君は新しいAPIバージョン(例えば18)が出たら、</p>

<p><strong><code>18.0.0</code>ディレクトリーでも作ってくれるんです？</strong></p>

<p>これ、ビルドスクリプトとか、ビルド関連のちょっとした作業とか</p>

<p>ぶっ壊れるよね…え、ぶっ壊れない？なら、いいんだけど、</p>

<p><strong>IntelliJ IDEA様</strong>を欺いているよね…</p>

<p>これじゃ</p>

<h2>Androidって<strong>write once, run once upon a time</strong>ってことだよね</h2>

<p>Javaの最も貫徹したコンセプトである</p>

<h2>write once run anywhere</h2>

<p>を破っているよね。</p>

<p>というわけで、結論</p>

<h2>AndroidはJavaではなかった、決して</h2>

<p><strong>p.s.</strong></p>

<p>最初この問題にあたった時にStack Overflowを調べました。</p>

<p>すでに、先駆者がいました。</p>

<p><a href="http://stackoverflow.com/questions/16588969/android-hello-world-compile-error-intellij-cannot-find-aapt">Android Hello-World compile error: Intellij cannot find aapt</a></p>

<p>で、解決方法のアドバイスとして</p>

<ul>
<li><strong>JetBrains様がIDEをアップデートしてくれるのを待つしかないんじゃない？</strong></li>
<li>シンボリックリンクを貼ればいいんじゃない</li>
<li>ツール類を<code>platform-tools</code>にコピペすればいいんじゃない</li>
</ul>


<p>と有りました。</p>

<p>当面の解決策としては2番目が採択されそうですが、</p>

<p><code>
:17.0.0 mike$ ln -s aapt ../../platform-tools/aapt
:17.0.0 mike$ ln -s aidl ../../platform-tools/aidl
:17.0.0 mike$ ln -s lib ../../platform-tools/lib
</code></p>

<p>をやった後ですが、</p>

<p><img src="https://googledrive.com/host/0B4hhdHWLP7RReVgzYzJvOHZJS2s" style="width : 488px;" /></p>

<p>はい、コンパイルできません。</p>

<p>というわけで、JetBrains様がIntelliJ IDEAを対応させるのを待つしかなさそうです。</p>

<p>IntelliJガチ勢の僕としては、googleに一言もの申したい</p>

<h2>googleさん、JetBrains様にごめんなさいしてください</h2>

<p>つーか、ツールがバージョンアップしてもIDEのバージョンアップが必要ないと言ってた、</p>

<p>あのリリースノート何だったんです？</p>

<p>google 「ツールがバージョンアップしてもIDEのバージョンアップがいらないと言ったな、あれは、嘘だ」</p>

<p><!-- admax -->
<script type="text/javascript" src="http://adm.shinobi.jp/s/d0f95faac716337846b3bcf82925c26e"></script>
<!-- admax -->


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-40855644-1', 'github.io');
  ga('send', 'pageview');

</script>
</p>
]]></content>
  </entry>
  
</feed>
