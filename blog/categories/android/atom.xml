<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: android | mike、mikeなるままに…]]></title>
  <link href="http://mike-neck.github.io/blog/categories/android/atom.xml" rel="self"/>
  <link href="http://mike-neck.github.io/"/>
  <updated>2013-06-09T10:35:25+09:00</updated>
  <id>http://mike-neck.github.io/</id>
  <author>
    <name><![CDATA[mike-neck]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[AndroidがJavaでない理由 - 1]]></title>
    <link href="http://mike-neck.github.io/blog/2013/06/01/androidgajavadenaili-you-1/"/>
    <updated>2013-06-01T02:22:00+09:00</updated>
    <id>http://mike-neck.github.io/blog/2013/06/01/androidgajavadenaili-you-1</id>
    <content type="html"><![CDATA[<p>こんにちは。</p>

<p>みけです。</p>

<p>また仰々しいタイトルですみません。</p>

<h2>Androidのsdkが5月16日近辺にrevision22に更新されたようです</h2>

<p>リリースノートを一部抜粋、翻訳(意訳)するとこんな感じです。</p>

<ul>
<li>既存の<code>platfomr-tools</code>を元にSDKの構造を変更して、新しいビルドツール等を追加しました。この変更により、ビルドツールのバージョンとIDEのバージョンを切り離すことが可能になります。その結果、IDEの更新なしにツールの更新が可能になりました。</li>
</ul>


<p>さて、僕はAndroidに関しては情弱なので、この変更が意味するところをあまり気にせず、</p>

<p>本題である<strong>「JavaがAndroidでない理由」</strong>ことの実例コードを書こうとして</p>

<p>サンプルプロジェクトを作って、実行しようとした時にそれは起こりました。</p>

<h2>android-apt-compiler: Cannot run program &ldquo;/Users/name/Android/sdk/android-sdk-macosx/platform-tools/aapt&rdquo;: error=2, No such file or directory</h2>

<p><img src="https://pbs.twimg.com/media/BLlghpZCAAA8qOp.png:large" style="width : 504px;"/></p>

<p>うん？コンパイル用のツールが見つからない？</p>

<p>というわけで、件のディレクトリーに移動、ファイル探してみると…</p>

<p><code>
:~ mike$ cd ~/Android/sdk/android-sdk-macosx/platform-tools/
:platform-tools mike$ ll
total 3664
drwxr-xr-x   7 mike  staff   238B  5 31 19:05 .
drwxr-x---  14 mike  staff   476B  5 31 18:31 ..
-rw-r--r--   1 mike  staff   396K  5 31 18:30 NOTICE.txt
-rwxr-xr-x   1 mike  staff   1.2M  5 31 18:30 adb
drwxr-xr-x   3 mike  staff   102B  5 31 18:30 api
-rwxr-xr-x   1 mike  staff   185K  5 31 18:30 fastboot
-rw-r--r--   1 mike  staff    16K  5 31 18:30 source.properties
</code></p>

<p>うむ、確かにそんなものはない…</p>

<p>で、いろいろとディレクトリーを漁ってみると</p>

<p><code>
:~ mike$ cd ~/Android/sdk/android-sdk-macosx/build-tools/17.0.0/
:17.0.0 mike$ ll
total 61624
drwxr-xr-x  11 mike  staff   374B  5 31 18:30 .
drwxr-xr-x   3 mike  staff   102B  5 31 18:30 ..
-rw-r--r--   1 mike  staff    11K  5 31 18:30 NOTICE.txt
-rwxr-xr-x   1 mike  staff   1.2M  5 31 18:30 aapt
-rwxr-xr-x   1 mike  staff   273K  5 31 18:30 aidl
-rwxr-xr-x   1 mike  staff   141K  5 31 18:30 dexdump
-rwxr-xr-x   1 mike  staff   2.5K  5 31 18:30 dx
drwxr-xr-x   3 mike  staff   102B  5 31 18:30 lib
-rwxr-xr-x   1 mike  staff    28M  5 31 18:30 llvm-rs-cc
drwxr-xr-x   4 mike  staff   136B  5 31 18:30 renderscript
-rw-r--r--   1 mike  staff    16K  5 31 18:30 source.properties
</code></p>

<p>お、あった。</p>

<p>…あったはいいよ。</p>

<p>でも、このディレクトリーは何？</p>

<p><strong><code>17.0.0</code></strong></p>

<p>何、このディレクトリー。</p>

<p>数字ディレクトリー。</p>

<p><strong>どこのSIerの作業ですか？</strong></p>

<p>え、じゃあ、君は新しいAPIバージョン(例えば18)が出たら、</p>

<p><strong><code>18.0.0</code>ディレクトリーでも作ってくれるんです？</strong></p>

<p>これ、ビルドスクリプトとか、ビルド関連のちょっとした作業とか</p>

<p>ぶっ壊れるよね…え、ぶっ壊れない？なら、いいんだけど、</p>

<p><strong>IntelliJ IDEA様</strong>を欺いているよね…</p>

<p>これじゃ</p>

<h2>Androidって<strong>write once, run once upon a time</strong>ってことだよね</h2>

<p>Javaの最も貫徹したコンセプトである</p>

<h2>write once run anywhere</h2>

<p>を破っているよね。</p>

<p>というわけで、結論</p>

<h2>AndroidはJavaではなかった、決して</h2>

<p><strong>p.s.</strong></p>

<p>最初この問題にあたった時にStack Overflowを調べました。</p>

<p>すでに、先駆者がいました。</p>

<p><a href="http://stackoverflow.com/questions/16588969/android-hello-world-compile-error-intellij-cannot-find-aapt">Android Hello-World compile error: Intellij cannot find aapt</a></p>

<p>で、解決方法のアドバイスとして</p>

<ul>
<li><strong>JetBrains様がIDEをアップデートしてくれるのを待つしかないんじゃない？</strong></li>
<li>シンボリックリンクを貼ればいいんじゃない</li>
<li>ツール類を<code>platform-tools</code>にコピペすればいいんじゃない</li>
</ul>


<p>と有りました。</p>

<p>当面の解決策としては2番目が採択されそうですが、</p>

<p><code>
:17.0.0 mike$ ln -s aapt ../../platform-tools/aapt
:17.0.0 mike$ ln -s aidl ../../platform-tools/aidl
:17.0.0 mike$ ln -s lib ../../platform-tools/lib
</code></p>

<p>をやった後ですが、</p>

<p><img src="https://googledrive.com/host/0B4hhdHWLP7RReVgzYzJvOHZJS2s" style="width : 488px;" /></p>

<p>はい、コンパイルできません。</p>

<p>というわけで、JetBrains様がIntelliJ IDEAを対応させるのを待つしかなさそうです。</p>

<p>IntelliJガチ勢の僕としては、googleに一言もの申したい</p>

<h2>googleさん、JetBrains様にごめんなさいしてください</h2>

<p>つーか、ツールがバージョンアップしてもIDEのバージョンアップが必要ないと言ってた、</p>

<p>あのリリースノート何だったんです？</p>

<p>google 「ツールがバージョンアップしてもIDEのバージョンアップがいらないと言ったな、あれは、嘘だ」</p>

<p><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-40855644-1', 'github.io');
  ga('send', 'pageview');

</script>
</p>
]]></content>
  </entry>
  
</feed>
